(function(t){"use strict";var n,e,i,o,s,c,r=this,a=0,l=!1,d="Activate Voice Control",u="What can I help you with?",f=[],m=function(){c=document.createElement("div"),c.id="skitt-ui",c.innerHTML='<a id="skitt-toggle-button">&nbsp;</a><label for="skitt-toggle-button" id="skitt-toggle-button__label">'+d+'</label><div id="skitt-listening-box"><div id="skitt-listening-text"><span id="skitt-listening-text__instructions">'+u+"</span></div></div>",c.style.display="none",document.body.appendChild(c),b(),h(),document.getElementById("skitt-toggle-button").addEventListener("click",function(){r.SpeechKITT.toggleRecognition()})},g=function(){return c!==t},h=function(){o&&c&&(s?s.href=o:(s=document.createElement("link"),s.rel="stylesheet",s.href=o,s.id="skitt-style-sheet",document.body.appendChild(s)))},b=function(){if(f.length&&c){var t=document.getElementById("skitt-listening-text__samples");if(!t){var n=document.getElementById("skitt-listening-text__instructions");t=document.createElement("span"),t.id="skitt-listening-text__samples",n.parentNode.insertBefore(t,n.nextSibling)}t.innerText=f.join(". ")+"."}},k=function(){g()&&(c.classList.remove("skitt-ui--not-listening"),c.classList.add("skitt-ui--listening"))},p=function(){g()&&(c.classList.add("skitt-ui--not-listening"),c.classList.remove("skitt-ui--listening"))},y=function(){l||(l=!0,k())},T=function(){l&&(l=!1,p())},x=function(t,n){c&&(document.getElementById(n).innerText=t)},v=function(){var t=new Date;t.setTime(t.getTime()+6e4*a),document.cookie="skittremember=1; expires="+t.toUTCString()+"; path=/"},w=function(){document.cookie="skittremember=1; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},E=function(){return-1!==document.cookie.indexOf("skittremember")},_=function(t,n){if("function"!=typeof t)throw new TypeError(n)};r.SpeechKITT={setStartCommand:function(t,n){t=r[t]||t,_(t,"invalid callback function"),n=n||this,e={callback:t,context:n}},setAbortCommand:function(t,n){t=r[t]||t,_(t,"invalid callback function"),n=n||this,i={callback:t,context:n}},startRecognition:function(){if(!e)throw new TypeError("cannot start recognition. Start command not defined");a&&v(),e.callback.apply(e.context),y()},abortRecognition:function(){if(!i)throw new TypeError("cannot abort recognition. Abort command not defined");w(),i.callback.apply(i.context),T()},toggleRecognition:function(){l?this.abortRecognition():this.startRecognition()},onStart:function(){r.clearTimeout(n),y()},onEnd:function(){n=setTimeout(T,100)},setStylesheet:function(t){o=t,h()},render:function(){g()||m(),E()&&!this.isListening()&&this.startRecognition(),this.isListening()?k():p()},vroom:function(){this.render()},hide:function(){if(!g())throw new TypeError("cannot hide interface. Must be rendered first");c.classList.add("skitt-ui--hidden")},show:function(){if(!g())throw new TypeError("cannot show interface. Must be rendered first");c.classList.remove("skitt-ui--hidden")},isListening:function(){return l},setToggleLabelText:function(t){d=t,x(t,"skitt-toggle-button__label")},setInstructionsText:function(t){u=t,x(t,"skitt-listening-text__instructions")},setSampleCommands:function(t){f=t,b()},rememberStatus:function(t){if("number"!=typeof t||0>t)throw new TypeError("rememberStatus() only accepts positive integers");a=t},annyang:function(){this.setStartCommand(annyang.start),this.setAbortCommand(annyang.abort),annyang.addCallback("start",this.onStart),annyang.addCallback("end",this.onEnd)}},exports.speechkitt=r}).call(this);